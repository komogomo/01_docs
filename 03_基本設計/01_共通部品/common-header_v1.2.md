# HarmoNet 共通ヘッダー領域設計書

| ドキュメントID     | HNM-COMMON-HEADER-001                                   |
| ------------ | ------------------------------------------------------- |
| **バージョン**    | **v1.2**                                                |
| **作成日**      | 2025-10-27                                              |
| **最終更新日**    | 2025-11-15                                              |
| **作成者**      | TKD                                                     |
| **更新協力**     | Tachikoma (GPT-5.1)                                     |
| **デザインシステム** | common-design-system_v1.2 / common-contents-layout_v1.2 |
| **承認者**      | （未定）                                                    |

---

## 1. 概要

本ドキュメントは、HarmoNet アプリケーションの **共通ヘッダー領域** の基本仕様を定義する。

### 1.1 適用範囲

* 対象画面

  * ログイン画面を除く、HarmoNet の主要画面全般
* 表示位置

  * 画面最上部（固定表示）

### 1.2 設計原則

* **視認性**: アプリ名、重要なアクション（通知など）を常に認識しやすく配置する。
* **一貫性**: 全画面で同じレイアウト・トーンを維持する。
* **操作性**: タップ領域は最小 44×44px を確保する。
* **静けさ**: 「やさしい・自然・控えめ」な UI を維持し、装飾やアニメーションを最小限とする。

---

## 2. 基本仕様

### 2.1 レイアウト（論理構造）

```
┌──────────────────────────────────────┐
│  [ロゴ（アプリ名）]        [通知]   [LanguageSwitch] │
└──────────────────────────────────────┘
```

* 左側: アプリ名（ロゴ）
* 右側: 通知ボタン、言語切替コンポーネント（C-02: LanguageSwitch）

具体的な JSX / Tailwind 構成は `ch01_AppHeader_v1.0.md` に委ね、本書では役割と配置のみを定義する。

### 2.2 寸法（基準値）

| 項目      | 値                          | 備考                                |
| ------- | -------------------------- | --------------------------------- |
| ヘッダー高さ  | 約 56〜60px                  | デバイス幅に応じて微調整。SP 56px / PC 60px 目安 |
| 幅       | 100%                       | 画面幅いっぱい                           |
| 内部パディング | 左右: 16〜24px / 上下: 8〜12px   | common-contents-layout_v1.2 に準拠   |
| 背景色     | `bg-white`                 | 共通デザインシステム準拠                      |
| 下部ボーダー  | `border-b border-gray-200` | コンテンツ領域との区切り                      |
| z-index | 1000                       | 他要素より前面に表示                        |

---

## 3. 配置要素

### 3.1 アプリ名（ロゴ）

#### 3.1.1 基本情報

| 項目       | 値                                        |
| -------- | ---------------------------------------- |
| 位置       | 左端（ヘッダー内左寄せ）                             |
| 表示テキスト   | `HarmoNet`（英字固定、ケースは設計時に決定）              |
| フォント     | 共通デザインシステムに準拠（ゴシック系サンセリフ）                |
| フォントサイズ  | 画面タイトルより一段控えめな強さ（例: `text-lg`〜`text-xl`） |
| フォントウェイト | `font-semibold`                          |
| テキスト色    | `text-gray-900`                          |

#### 3.1.2 機能

* タップまたはクリックでホーム画面（`/home`）へ遷移する。
* どの画面からでもホームへ戻るための共通導線とする。

#### 3.1.3 アクセシビリティ

* リンクには `aria-label="ホーム画面に戻る"` 等を付与し、役割を明示する。

---

### 3.2 通知ボタン

> 通知機能は別途「通知機能基本設計」が正となる。本書ではヘッダー上の表示・配置のみを定義する。

#### 3.2.1 基本情報

| 項目      | 値                         |
| ------- | ------------------------- |
| 位置      | ヘッダー右側、LanguageSwitch の左隣 |
| 形状      | アイコンボタン（ベルなど線形アイコン）       |
| サイズ     | タップ領域 44×44px 以上          |
| アイコンサイズ | 約 20〜24px                 |
| 色       | 通常時 `text-gray-500`       |

#### 3.2.2 状態

* 未読がある場合、アイコン右上に小さなバッジを表示してもよい（詳細仕様は通知設計書に委ねる）。
* エラー時や未ログイン時など、通知が利用できない場合の表示ルールも通知設計側で定義する。

#### 3.2.3 アクセシビリティ

* `aria-label="通知"` など、機能を説明するラベルを付与する。
* バッジは `aria-hidden="true"` とし、未読件数の読み上げが必要な場合は別途実装を検討する。

---

### 3.3 言語切替コンポーネント（LanguageSwitch）

ヘッダー右端には、共通コンポーネント C-02: LanguageSwitch を配置する。

#### 3.3.1 役割

* 現在の表示言語（JA / EN / ZH など）をユーザーに示し、切替操作を提供する。
* 実際の実装・状態管理は `ch02_LanguageSwitch_v1.0.md` および `ch03_StaticI18nProvider_v1.0.md` に従う。

#### 3.3.2 配置と寸法

* 位置: ヘッダー右端
* サイズ: 高さ 36〜40px 程度
* 角丸・色: 共通デザインシステムのボタンスタイルに準拠

#### 3.3.3 アクセシビリティ

* ボタンには `aria-label="言語を切り替える"` などを付与し、メニューを持つ場合は `aria-haspopup` / `aria-expanded` を適切に設定する。

---

## 4. スタイル方針

### 4.1 背景・ボーダー

* 背景色: `bg-white`
* 下部ボーダー: `border-b border-gray-200`
* 影は原則なし。必要な場合でも `shadow-sm` 程度に留める。

### 4.2 レイアウト

* Flex レイアウトを基本とし、

  * 左側: アプリ名
  * 右側: 通知ボタン、LanguageSwitch
    を水平に配置する。
* ヘッダー直下のコンテンツ領域との間に十分な余白を取り、コンテンツがヘッダーに密着しないようにする（`pt-16` 前後を目安）。

---

## 5. レスポンシブ対応

### 5.1 デバイス別の調整指針

| デバイス    | 高さ目安 | パディング        | 備考            |
| ------- | ---- | ------------ | ------------- |
| スマートフォン | 56px | 左右 `px-4`    | 言語ボタン幅をやや抑える  |
| タブレット   | 60px | 左右 `px-6`    | 通知・言語ボタンをフル表示 |
| デスクトップ  | 60px | 左右 `px-8` 以上 | 余白に余裕を持たせる    |

### 5.2 小画面での最適化

* 幅の狭い端末では、アプリ名のフォントサイズを一段落として可読性を維持する。
* 必要な場合は、ラベルを短くする（例: ログインユーザー名の表示などはヘッダーに載せない）。

---

## 6. インタラクション

### 6.1 ホバー・フォーカス

* ロゴリンク / 通知ボタン / LanguageSwitch は、

  * hover 時に背景色をわずかに変える（例: `bg-gray-50`）
  * focus-visible 時にはっきりしたフォーカスリングを表示する
* 派手なアニメーションやトランジションは不要とし、150ms 程度のフェードを上限とする。

### 6.2 タップフィードバック（モバイル）

* タップ時に一時的に背景色を変えるなど、軽いフィードバックを与える。

具体的なクラス・トランジションは `ch01_AppHeader_v1.0.md` で定義する。

---

## 7. アクセシビリティ

* `<header>` 要素には `role="banner"` を付与してもよい（HTML5 セマンティクスを優先）。
* Tab キーで「ロゴ → 通知 → LanguageSwitch」の順にフォーカスが移動するようにする。
* ヘッダー操作のみで画面が操作不能にならないよう、フォーカスがコンテンツ領域にも確実に届くことを確認する。

---

## 8. 関連ドキュメント

| ドキュメント名                           | 説明                      |
| --------------------------------- | ----------------------- |
| `common-design-system_v1.2.md`    | HarmoNet 共通デザインシステム基本設計 |
| `common-contents-layout_v1.2.md`  | 共通コンテンツレイアウト基本設計        |
| `ch01_AppHeader_v1.0.md`          | AppHeader 詳細設計          |
| `ch02_LanguageSwitch_v1.0.md`     | 言語切替コンポーネント詳細設計         |
| `ch03_StaticI18nProvider_v1.0.md` | i18n 基盤詳細設計             |

---

## 9. 改訂履歴

| バージョン | 日付         | 更新者             | 更新内容                                                                                                                                                                 |
| ----- | ---------- | --------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| v1.2  | 2025-11-15 | TKD + Tachikoma | HarmoNet 専用ヘッダー基本設計として再定義。旧 SEC-APP 系 ID・セキュレア名称・生 HTML/CSS 実装例を削除し、AppHeader / LanguageSwitch / StaticI18nProvider との関係を明示。通知は「ヘッダー上の表示位置」のみを定義し、機能詳細は別設計書に委ねる形に整理。 |
| v1.1  | 2025-10-27 | TKD             | 共通ヘッダー領域の詳細仕様初版。                                                                                                                                                     |
| v1.0  | 2025-10-27 | TKD             | 叩き台としての簡易版を作成。                                                                                                                                                       |
