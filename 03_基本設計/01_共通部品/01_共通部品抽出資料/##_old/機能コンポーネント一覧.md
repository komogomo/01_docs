# HarmoNet コンポーネント定義一覧 v1.1
作成目的：設計書作成の元データ（画面→機能→最小コンポーネント）  
注記：規模=S/M/L、難易度=1(容易)〜5(最難関・非機能寄り)、安全ステップ数=AI実装の推奨往復回数

---

## 1. 共通部品（非機能含む）
| ID | 画面名 | 機能名 | コンポーネント名 | 規模 | 難易度 | 安全ステップ数 | 備考 |
|---:|---|---|---|---|---:|---:|---|
| C-01 | 共通部品 | 画面ヘッダー | AppHeader | S | 2 | 3 | ロゴ/ナビ/状態表示 |
| C-02 | 共通部品 | 言語切替（静的翻訳） | LanguageSwitch | S | 3 | 4 | next-intl辞書切替、SSR/CSR整合 |
| C-03 | 共通部品 | 静的翻訳ローダ | StaticI18nProvider | S | 3 | 4 | ルートで辞書注入 |
| C-04 | 共通部品 | 画面フッター | AppFooter | S | 1 | 2 | コピーライト |
| C-05 | 共通部品 | 画面ショートカット | FooterShortcutBar | S | 3 | 4 | 権限別ショートカット表示 |
| C-06 | 共通部品 | 添付アップロード | AttachmentUploader | M | 4 | 5 | 受入MIME/サイズ/複数 |
| C-07 | 共通部品 | エディタラッパ | EditorWrapper | M | 3 | 4 | Markdown/WYSIWYG抽象化 |
| C-08 | 共通部品 | 投稿確認ダイアログ | PostConfirmDialog | S | 2 | 3 | 投稿/アンケ共用 |
| C-09 | 共通部品 | 翻訳リンク | TranslateButton | S | 2 | 3 | 押下で翻訳要求 |
| C-10 | 共通部品 | 動的翻訳 | DynamicTranslator | M | 4 | 5 | 翻訳API統合 |
| C-11 | 共通部品 | 翻訳キャッシュ | TranslationCache | M | 4 | 5 | Supabase/Redis、RLS分離 |
| C-12 | 共通部品 | 音声読み上げ | VoiceReader | M | 4 | 5 | VoiceVox/音声キャッシュ |
| C-13 | 共通部品 | グローバル例外 | AppErrorBoundary | M | 4 | 5 | 画面全体例外捕捉 |
| C-14 | 共通部品 | アラート表示 | ErrorAlert | S | 2 | 3 | 翻訳対応メッセージ |
| C-15 | 共通部品 | フィールドエラー | InlineFieldError | S | 2 | 3 | 入力直下表示 |
| C-16 | 共通部品 | エラーハンドラProvider | ErrorHandlerProvider | M | 4 | 5 | 例外分類/通知 |
| C-17 | 共通部品 | エラーフック | useErrorHandler | M | 4 | 5 | API/認証/翻訳統合 |
| C-18 | 共通部品 | ロギングサービス | ErrorLoggerService | M | 3 | 4 | Supabase/Sentry連携 |
| C-19 | 共通部品 | トースト通知 | ErrorToastDispatcher | S | 3 | 4 | Banner連動 |
| C-20 | 共通部品 | 翻訳/音声共通設定 | AccessibilityConfig | S | 3 | 3 | 翻訳/音声の既定設定

---

## 2. 機能固有（53件）

### 2.1 ログイン
| ID | 画面名 | 機能名 | コンポーネント名 | 規模 | 難易度 | 安全ステップ数 | 備考 |
|---:|---|---|---|---|---:|---:|---|
| A-01 | ログイン | Magic Link | MagicLinkForm | M | 3 | 4 | signInWithOtp、成功/失敗UI |
| A-02 | ログイン | Passkey | PasskeyButton | S | 3 | 3 | WebAuthn呼出し |
| A-03 | ログイン | コールバック | AuthCallbackHandler | S | 4 | 4 | トークン検証/復帰 |
| A-04 | ログイン | ローディング | AuthLoadingIndicator | S | 1 | 2 | 非同期中表示 |
| A-05 | ログイン | エラー表示 | AuthErrorBanner | S | 1 | 2 | 人間可読化 |

### 2.2 掲示板（一覧・詳細・投稿）
| ID | 画面名 | 機能名 | コンポーネント名 | 規模 | 難易度 | 安全ステップ数 | 備考 |
|---:|---|---|---|---|---:|---:|---|
| B-01 | 掲示板一覧 | 一覧取得/表示 | PostList | M | 3 | 4 | ページング/タグ |
| B-02 | 掲示板一覧 | 投稿カード | PostItem | S | 2 | 3 | 概要表示 |
| B-03 | 掲示板一覧 | タグフィルタ | TagFilterBar | S | 2 | 3 | URL同期 |
| B-04 | 掲示板詳細 | 本文表示 | PostDetail | M | 4 | 5 | 翻訳/音声共通利用 |
| B-05 | 掲示板詳細 | PDFプレビュー | PdfPreviewModal | M | 4 | 5 | PDF.js |
| B-06 | 掲示板投稿 | エディタ | PostEditor | M | 4 | 5 | 下書き保存 |
| B-07 | 掲示板投稿 | 保存処理 | useSubmitPost | M | 4 | 5 | 権限/復旧 |

### 2.3 アンケート（一覧・投稿・回答・集計）
| ID | 画面名 | 機能名 | コンポーネント名 | 規模 | 難易度 | 安全ステップ数 | 備考 |
|---:|---|---|---|---|---:|---:|---|
| S-01 | アンケート一覧 | 一覧表示 | SurveyList | M | 3 | 4 | 公開/締切/回答状況 |
| S-02 | アンケート投稿 | 設問エディタ | SurveyEditor | M | 4 | 5 | 設問型/必須/分岐 |
| S-03 | アンケート投稿 | プレビュー | SurveyPreview | S | 3 | 4 | 表示確認 |
| S-04 | アンケート投稿 | 保存処理 | useSubmitSurvey | M | 4 | 5 | surveys/items登録 |
| S-05 | アンケート回答 | 回答フォーム | SurveyForm | L | 5 | 6 | 動的設問/検証 |
| S-06 | アンケート回答 | 回答保存 | useSubmitSurveyAnswer | M | 5 | 6 | answers連鎖登録 |
| S-07 | アンケート集計 | グラフ表示 | SurveyChart | M | 4 | 5 | 集計+Chart.js |

### 2.4 施設予約
| ID | 画面名 | 機能名 | コンポーネント名 | 規模 | 難易度 | 安全ステップ数 | 備考 |
|---:|---|---|---|---|---:|---:|---|
| R-01 | 施設予約 | カレンダー | CalendarView | M | 4 | 5 | 予約状況表示 |
| R-02 | 施設予約 | 予約フォーム | ReservationForm | M | 5 | 6 | 競合チェック/タイムゾーン |
| R-03 | 施設予約 | 結果画面 | ReservationResult | S | 2 | 3 | 完了/失敗表示 |

### 2.5 テナント管理（管理者）
| ID | 画面名 | 機能名 | コンポーネント名 | 規模 | 難易度 | 安全ステップ数 | 備考 |
|---:|---|---|---|---|---:|---:|---|
| T-01 | テナント管理 | テナント一覧 | TenantList | M | 4 | 5 | RLS整合一覧 |
| T-02 | テナント管理 | 設定編集 | TenantSettingForm | L | 5 | 7 | 多テナント設定 |
| T-03 | テナント管理 | 権限管理 | RolePermissionTable | L | 5 | 7 | Prisma/Supabase連動 |

### 2.6 通知センター
| ID | 画面名 | 機能名 | コンポーネント名 | 規模 | 難易度 | 安全ステップ数 | 備考 |
|---:|---|---|---|---|---:|---:|---|
| N-01 | 通知センター | 通知一覧 | NotificationList | M | 3 | 4 | リアルタイム購読 |
| N-02 | 通知センター | 通知バナー | NotificationBanner | S | 2 | 3 | 軽量UI |

### 2.7 運用ルール
| ID | 画面名 | 機能名 | コンポーネント名 | 規模 | 難易度 | 安全ステップ数 | 備考 |
|---:|---|---|---|---|---:|---:|---|
| U-01 | 運用ルール | ルール一覧 | RuleList | S | 2 | 3 | カテゴリ/検索 |
| U-02 | 運用ルール | ルール詳細 | RuleDetail | S | 2 | 3 | 静的+翻訳 |

### 2.8 システム設定（管理者）
| ID | 画面名 | 機能名 | コンポーネント名 | 規模 | 難易度 | 安全ステップ数 | 備考 |
|---:|---|---|---|---|---:|---:|---|
| Y-01 | システム設定 | 設定フォーム | SystemSettingForm | L | 5 | 7 | 多環境/検証多数 |
| Y-02 | システム設定 | バックアップ | BackupPanel | M | 4 | 5 | DB操作/認証 |

---

## 3. 補足（運用ルール：抜粋）
- 1行＝1タスク（コードエージェント用）。  
- 非機能（難易度5）はエージェント対象外。安定AI（Claude/Gemini）がその時点で担当。  
- 受け入れ基準：自己採点3項目平均≥9/10、型/ESLint/Prettierエラー0、テスト100%パス。  
- リトライ最大3回。未達は要件再設計に戻す。

