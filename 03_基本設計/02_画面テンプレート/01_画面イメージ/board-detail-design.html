<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>掲示板詳細 - HarmoNet</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState } = React;
        
        // SVG Icons
        const ChevronLeft = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="15 18 9 12 15 6"></polyline>
            </svg>
        );
        
        const FileText = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10 9 9 9 8 9"></polyline>
            </svg>
        );
        
        const X = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        );

        const Languages = ({ className }) => (
            <svg className={className} width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M5 8l6 6"></path>
                <path d="M4 14l6-6 2-3"></path>
                <path d="M2 5h12"></path>
                <path d="M7 2h1"></path>
                <path d="M22 22l-5-10-5 10"></path>
                <path d="M14 18h6"></path>
            </svg>
        );

        const Volume2 = ({ className }) => (
            <svg className={className} width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>
            </svg>
        );

        const BoardDetailMock = () => {
            const [showPdfPreview, setShowPdfPreview] = useState(false);
            const [selectedPdf, setSelectedPdf] = useState(null);
            const [isTranslating, setIsTranslating] = useState(false);
            const [isPlaying, setIsPlaying] = useState(false);

            const post = {
                title: '【重要】定期総会のお知らせ',
                tags: ['回覧板', '重要'],
                author: '理事会',
                date: '2025/11/21 18:30',
                content: `2025年12月15日（日）10:00より、集会室にて定期総会を開催いたします。

出席者の確認をお願いいたします。当日ご出席いただけない場合は、委任状の提出をお願いします。

【議題】
1. 2024年度活動報告
2. 2024年度決算報告
3. 2025年度活動計画案
4. 2025年度予算案
5. その他

詳細は添付資料をご確認ください。`,
                attachments: [
                    { id: 1, name: '定期総会_議案書_2025.pdf', size: '1.2 MB' },
                    { id: 2, name: '委任状フォーマット.pdf', size: '180 KB' }
                ]
            };

            const comments = [
                {
                    id: 1,
                    author: '山田太郎',
                    date: '2025/11/21 19:15',
                    content: '出席予定です。よろしくお願いいたします。'
                },
                {
                    id: 2,
                    author: '佐藤花子',
                    date: '2025/11/22 08:30',
                    content: '当日は仕事のため欠席いたします。委任状を提出させていただきます。'
                }
            ];

            const openPdfPreview = (pdf) => {
                setSelectedPdf(pdf);
                setShowPdfPreview(true);
            };

            const closePdfPreview = () => {
                setShowPdfPreview(false);
                setSelectedPdf(null);
            };

            const handleTranslate = () => {
                setIsTranslating(true);
                setTimeout(() => setIsTranslating(false), 1000);
            };

            const handleVoiceRead = () => {
                setIsPlaying(!isPlaying);
            };

            return (
                <>
                    <div className="min-h-screen bg-white font-sans">
                        {/* Header */}
                        <header className="sticky top-0 bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between z-10">
                            <button className="p-2 hover:bg-gray-100 rounded-lg transition-colors">
                                <ChevronLeft />
                            </button>
                            <h1 className="text-lg font-bold">掲示板詳細</h1>
                            <div className="w-10"></div>
                        </header>

                        {/* Main Content */}
                        <div className="px-4 py-6">
                            {/* Post Card */}
                            <div className="bg-white border border-gray-200 rounded-2xl p-5 mb-6">
                                {/* Title */}
                                <h1 className="text-xl font-bold mb-3">
                                    {post.title}
                                </h1>

                                {/* Meta Info */}
                                <div className="flex items-center justify-between mb-4 pb-4 border-b border-gray-100">
                                    <div className="flex items-center gap-2">
                                        {post.tags.map(tag => (
                                            <span
                                                key={tag}
                                                className="px-2 py-1 bg-gray-100 text-xs rounded-full"
                                            >
                                                {tag}
                                            </span>
                                        ))}
                                    </div>
                                    <div className="flex flex-col items-end gap-0.5 text-xs text-gray-500">
                                        <span>{post.author}</span>
                                        <span>{post.date}</span>
                                    </div>
                                </div>

                                {/* Content */}
                                <div className="mb-4">
                                    <p className="text-base leading-relaxed whitespace-pre-line text-gray-800">
                                        {post.content}
                                    </p>
                                    
                                    {/* Translation and Voice Icon Buttons */}
                                    <div className="flex items-center gap-2 mt-3">
                                        <button
                                            onClick={handleTranslate}
                                            className={`p-2 rounded-lg border transition-colors ${
                                                isTranslating
                                                    ? 'bg-blue-500 text-white border-blue-500'
                                                    : 'bg-white text-gray-700 border-gray-300 hover:border-gray-400'
                                            }`}
                                            aria-label="投稿本文を翻訳"
                                            title="翻訳"
                                        >
                                            <Languages className="w-5 h-5" />
                                        </button>
                                        
                                        <button
                                            onClick={handleVoiceRead}
                                            className={`p-2 rounded-lg border transition-colors ${
                                                isPlaying
                                                    ? 'bg-blue-500 text-white border-blue-500'
                                                    : 'bg-white text-gray-700 border-gray-300 hover:border-gray-400'
                                            }`}
                                            aria-label="投稿本文を読み上げ"
                                            title="読み上げ"
                                        >
                                            <Volume2 className="w-5 h-5" />
                                        </button>
                                    </div>
                                </div>

                                {/* Attachments */}
                                {post.attachments.length > 0 && (
                                    <div className="mt-4 pt-4 border-t border-gray-100">
                                        <h3 className="text-sm font-semibold mb-2 text-gray-700">
                                            添付ファイル
                                        </h3>
                                        <div className="space-y-2">
                                            {post.attachments.map(file => (
                                                <button
                                                    key={file.id}
                                                    onClick={() => openPdfPreview(file)}
                                                    className="w-full flex items-center gap-3 p-3 bg-gray-50 hover:bg-gray-100 rounded-xl transition-colors"
                                                >
                                                    <FileText />
                                                    <div className="flex-1 text-left">
                                                        <p className="text-sm font-medium text-gray-800 truncate">
                                                            {file.name}
                                                        </p>
                                                    </div>
                                                    <span className="text-xs text-gray-500">
                                                        {file.size}
                                                    </span>
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                )}
                            </div>

                            {/* Comments Section */}
                            <div className="mb-6">
                                <h2 className="text-lg font-bold mb-4">返信</h2>
                                <div className="space-y-3">
                                    {comments.map(comment => (
                                        <div
                                            key={comment.id}
                                            className="bg-white border border-gray-200 rounded-xl p-4"
                                        >
                                            <div className="flex items-center justify-between mb-2">
                                                <span className="text-sm font-semibold text-gray-800">
                                                    {comment.author}
                                                </span>
                                                <span className="text-xs text-gray-500">
                                                    {comment.date}
                                                </span>
                                            </div>
                                            <p className="text-sm text-gray-700 leading-relaxed">
                                                {comment.content}
                                            </p>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            {/* Reply Input */}
                            <div className="bg-white border border-gray-200 rounded-xl p-4">
                                <textarea
                                    placeholder="返信を入力..."
                                    className="w-full px-3 py-2 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    rows="3"
                                />
                                <div className="flex justify-end mt-3">
                                    <button className="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">
                                        送信
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* PDF Preview Modal */}
                    {showPdfPreview && (
                        <div className="fixed inset-0 bg-black bg-opacity-90 z-50 flex flex-col">
                            {/* Close Button */}
                            <div className="flex justify-end p-4">
                                <button
                                    onClick={closePdfPreview}
                                    className="p-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg transition-colors"
                                >
                                    <X />
                                </button>
                            </div>

                            {/* PDF Viewer Area */}
                            <div className="flex-1 flex items-center justify-center p-4">
                                <div className="bg-white rounded-lg shadow-2xl p-8 max-w-2xl w-full">
                                    <div className="text-center space-y-4">
                                        <FileText />
                                        <div>
                                            <h3 className="font-bold text-lg mb-2">
                                                {selectedPdf?.name}
                                            </h3>
                                            <p className="text-sm text-gray-600">
                                                {selectedPdf?.size}
                                            </p>
                                        </div>
                                        <div className="h-96 bg-gray-100 rounded-lg flex items-center justify-center">
                                            <p className="text-gray-500">
                                                PDF コンテンツがここに表示されます
                                                <br />
                                                <span className="text-xs">(PDF.js で実装予定)</span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Tap to Close Hint */}
                            <div className="text-center pb-6">
                                <button
                                    onClick={closePdfPreview}
                                    className="text-white text-sm opacity-70 hover:opacity-100 transition-opacity"
                                >
                                    タップで閉じる
                                </button>
                            </div>
                        </div>
                    )}
                </>
            );
        };

        ReactDOM.render(<BoardDetailMock />, document.getElementById('root'));
    </script>
</body>
</html>