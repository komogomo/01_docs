# 第2章: 画面一覧と導線（HOME／掲示板TOP／詳細）

**掲示板機能 基本設計書 v2.2（HarmoNet準拠）**

[← 第1章](board-design-ch01_latest.md) | [第3章 →](board-design-ch03_latest.md)

---

## 2.1 対象画面一覧

本章では、掲示板機能に関連する 3 画面の役割と導線、およびタブ／カテゴリの基本仕様を定義する。

### 2.1.1 HOME内掲示板サマリ（ダッシュボード表示）

* パス: `/`（HOME画面）
* 役割:

  * テナント内で最近投稿された掲示板記事のうち、代表的な数件を「ダッシュボードカード」の一部として表示する。
  * 住民がアプリ起動直後に「重要なお知らせ」や「最近の投稿」を把握できるようにする。
* 特徴:

  * 一覧件数は少数（例: 最大 3〜5 件）に限定し、「詳細は掲示板へ」導線を明確にする。
  * HOME ではフィルタ／ソートは行わず、掲示板TOP側に委譲する。

### 2.1.2 掲示板TOP一覧画面（BoardTop）

* パス: `/board`
* 役割:

  * テナント内の掲示板投稿を、タブ（ALL / NOTICE / RULES）と範囲（GLOBAL / GROUP）で切り替えながら一覧表示する中核画面。
  * 重要なお知らせや管理ルールを見失わないようにしつつ、日常的な投稿も流れとして確認できるようにする。
* 特徴:

  * HOMEと同一トーンのカードレイアウトで、1 投稿 = 1 カードとして表示。
  * ページネーション・件数セレクタを持つ（詳細仕様は ch03 にて定義）。

### 2.1.3 掲示板詳細画面（BoardDetail）

* パス: `/board/[id]`
* 役割:

  * 選択した掲示板投稿の本文、添付（PDF プレビュー等）、コメント、音声読み上げを提供する詳細閲覧画面。
* 特徴:

  * 返信可能なユーザロール、コメント階層などのインタラクションは ch04 で定義する。
  * PDF プレビュー時の UI 挙動（モーダル表示・閉じ方等）は既定仕様に従う（掲示板詳細 ch04 にて再掲）。

---

## 2.2 HOME → 掲示板TOP の導線

### 2.2.1 HOME内掲示板サマリブロック

* HOME 画面内で「掲示板」セクションをカードとして配置し、以下を表示する。

  * セクションタイトル（例）: 「掲示板からのお知らせ」
  * タブ: ALL / NOTICE / RULES（表示中タブは視覚的に強調）
  * 各タブごとの最新投稿 3 件（最大）
* HOME では「閲覧のみ」とし、投稿・編集操作は `/board` 側に集約する。

### 2.2.2 「もっと見る」ボタンによる遷移

* HOMEの掲示板セクション末尾に「もっと見る」ボタンを配置。
* クリック／タップ時の挙動:

  * 現在 HOME 側で選択されているタブ情報（ALL / NOTICE / RULES）をクエリパラメータまたは state として `/board` に引き継ぐ。
  * 遷移先 `/board` では、引き継いだタブをアクティブ状態として初期表示する。
* 非機能:

  * タブ情報の引き継ぎは、URL クエリ（例: `/board?tab=notice`）を基本とし、ブックマーク可能な形とする。

---

## 2.3 タブ（ALL / NOTICE / RULES）の役割

### 2.3.1 タブ定義

* ALL

  * 対象: NOTICE + RULES + その他すべての投稿
  * 用途: 掲示板全体の流れをざっくり把握するためのデフォルトビュー。
* NOTICE

  * 対象: 管理組合・管理会社からの「お知らせ」カテゴリの投稿
  * 用途: 重要連絡やイベント案内など、住民が見落としたくない情報を集中表示。
* RULES

  * 対象: 管理規約・ルール・マナーなど、長期的に参照される投稿
  * 用途: 「困ったときに見返す」ための常設リファレンス的な一覧。

### 2.3.2 タブと投稿分類との関係

* 投稿作成時に「掲示板種別」または「カテゴリ」項目を指定し、内部的に ALL / NOTICE / RULES のいずれか（複数可 or 単一選択）に紐づける。
* 詳細な分類ロジックは、データ構造および投稿フォーム仕様（ch05）側で定義し、本章では「UI 上の見せ方」と「役割」だけを扱う。

---

## 2.4 範囲（GLOBAL / GROUP）の考え方

### 2.4.1 範囲定義

* GLOBAL

  * 対象: テナント全体に対する共通掲示板（全住民が閲覧可能）。
  * 例: 全体へのお知らせ、設備点検、停電情報など。
* GROUP

  * 対象: 特定のグループ（棟・フロア・コミュニティ等）に属する住民のみが閲覧対象となる掲示板。
  * 例: 棟ごとの連絡、子ども会、サークル活動など。

### 2.4.2 BoardTop での表示ルール

* デフォルト表示は `GLOBAL` のみ、または `GLOBAL + 所属グループ` のうち、実装しやすい方に合わせる（詳細は ch03 で確定）。
* ユーザは BoardTop 上で範囲切り替え UI（例: セレクトボックス or トグル）により、以下のビューを選択可能とする。

  * 「全ての掲示板（所属グループのみ）」
  * 「全体掲示板のみ（GLOBAL）」
  * 「所属グループ掲示板のみ（GROUP）」
* HOME のサマリ表示では、原則として GLOBAL + 所属グループの投稿から重要度の高いものを優先的に抽出する（詳細ロジックは将来検討）。

---

## 2.5 画面遷移シナリオ（概要）

### 2.5.1 代表シナリオ一覧

1. HOME 起動 → 掲示板サマリを確認 → 「もっと見る」 → `/board` へ遷移
2. `/board` でタブ／範囲を切り替えながら一覧を閲覧 → 投稿カードをタップ → `/board/[id]` で詳細閲覧
3. `/board/[id]` から「一覧に戻る」ボタンにより、元のタブ／範囲状態を保持したまま `/board` に戻る

### 2.5.2 状態保持方針

* BoardTop（/board）のタブ・範囲・ページ番号は、URL クエリまたはクライアント側状態管理で保持し、

  * 詳細画面へ遷移 → 戻る
  * ページリロード
    時にも可能な限り復元されるように設計する（詳細は BoardTop 詳細設計で定義）。

---

## 2.6 本章の位置づけ

* ch01 で定義した「掲示板の思想・MVP方針」を前提に、

  * HOME
  * BoardTop
  * BoardDetail
    の 3 画面がどのように連携し、住民が日常的に情報へアクセスするかの「大きな流れ」を定義した。
* 個々の画面のカード構造・ボタン配置・音声読み上げ・PDFプレビュー等の UI 詳細は、

  * BoardTop: ch03
  * BoardDetail: ch04
  * 投稿フォーム: ch05
    で扱う。
* AIモデレーションや翻訳、自動タグ付けなどの高度なロジックは、共通仕様として ch06 に集約し、本章では導線と役割に限定して記述している。
