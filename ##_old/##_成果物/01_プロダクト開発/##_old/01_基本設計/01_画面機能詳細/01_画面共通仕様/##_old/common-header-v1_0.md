# 共通ヘッダー領域設計書 v1.0

**Document ID:** SEC-APP-COMMON-HEADER-001  
**Version:** 1.0  
**Created:** 2025年10月27日  
**Purpose:** 全画面共通のヘッダー領域詳細仕様

---

## 1. 概要

本ドキュメントは、セキュレアシティ スマートコミュニケーションアプリの**ヘッダー領域**の詳細仕様を定義します。

### 1.1 適用範囲

- **対象画面:** ログイン画面を除く全画面
- **表示位置:** 画面最上部（固定表示）

### 1.2 設計原則

- **視認性:** 重要な機能（通知、言語切替）を常時表示
- **一貫性:** 全画面で同じレイアウト・デザイン
- **アクセス性:** タップ領域を十分に確保（最小44px×44px）

---

## 2. 基本仕様

### 2.1 レイアウト

```
┌──────────────────────────────────────────────────┐
│  [ロゴ]              [通知ボタン] [言語切替]     │
│  セキュレアシティ        🔔          JA ▼       │
└──────────────────────────────────────────────────┘
```

### 2.2 寸法

| 項目 | 値 | 備考 |
|------|-----|------|
| **高さ** | 60px（固定） | スマートフォンは56px |
| **幅** | 100%（画面幅いっぱい） | - |
| **内部パディング** | 左右: 16px、上下: 8px | - |
| **z-index** | 1000 | 最前面表示 |

---

## 3. 配置要素

### 3.1 アプリ名（ロゴ）

#### 3.1.1 基本情報

| 項目 | 値 |
|------|-----|
| **位置** | 左端 |
| **サイズ** | 150px × 40px |
| **テキスト** | 「セキュレアシティ」（日本語固定） |
| **フォント** | Yu Gothic, Hiragino Sans, sans-serif |
| **フォントサイズ** | 18px（太字） |
| **色** | 白色（#ffffff） |

#### 3.1.2 機能

- タップすると HOME 画面へ遷移
- どの画面からでも HOME に戻れる導線

#### 3.1.3 多言語対応

アプリ名は**日本語固定**です。言語切替を行っても変更されません。

---

### 3.2 通知ボタン

#### 3.2.1 基本情報

| 項目 | 値 |
|------|-----|
| **位置** | 右側（言語切替ボタンの左隣） |
| **サイズ** | 40px × 40px |
| **アイコン** | 🔔（ベル） |
| **タップ領域** | 44px × 44px（最小） |

#### 3.2.2 未読通知バッジ

未読通知がある場合、ベルアイコンの右上に赤いバッジを表示:

| 項目 | 値 |
|------|-----|
| **形状** | 円形 |
| **サイズ** | 直径16px |
| **背景色** | 赤色（#f44336） |
| **テキスト色** | 白色（#ffffff） |
| **フォントサイズ** | 10px |
| **表示内容** | 未読件数（最大99、それ以上は「99+」） |

#### 3.2.3 機能

- タップすると通知一覧画面へ遷移
- 未読件数は API から取得（`/api/notifications/unread-count`）
- リアルタイム更新（5分ごと、または画面遷移時）

#### 3.2.4 アクセシビリティ

```html
<button aria-label="通知 (未読3件)" class="notification-btn">
  🔔
  <span class="notification-badge">3</span>
</button>
```

---

### 3.3 言語切替ボタン

#### 3.3.1 基本情報

| 項目 | 値 |
|------|-----|
| **位置** | 右端 |
| **サイズ** | 80px × 40px |
| **表示形式** | 「JA ▼」「EN ▼」「CN ▼」 |
| **フォントサイズ** | 14px |
| **色** | 白色（#ffffff） |

#### 3.3.2 言語コード

| 言語 | コード | 表示 |
|------|--------|------|
| 日本語 | ja | JA |
| 英語 | en | EN |
| 中国語（簡体字） | zh | CN |

#### 3.3.3 動作

**ドロップダウンメニュー方式:**

1. ボタンをタップすると、下方向にメニューが表示
2. メニューには3言語のオプションが表示
3. 選択した言語に即座に切り替わる
4. 選択後、メニューは自動的に閉じる

**ドロップダウンメニューの仕様:**

| 項目 | 値 |
|------|-----|
| **幅** | 100px |
| **背景色** | 白色（#ffffff） |
| **ボーダー** | 1px solid #e0e0e0 |
| **影** | 0 2px 8px rgba(0,0,0,0.15) |
| **各項目の高さ** | 40px |
| **ホバー時の背景色** | #f5f5f5 |

#### 3.3.4 状態の永続化

選択した言語は以下に保存:
- **localStorage:** `selectedLanguage` キー
- **ユーザーマスタ:** `preferred_language` カラム（ログイン中の場合）

#### 3.3.5 詳細設計

> **📄 詳細は別紙参照**
> 
> 言語切替機能の詳細については、以下のドキュメントを参照してください:
> - 『**common-i18n-v1_0.md**』

---

## 4. スタイル仕様

### 4.1 背景色

ヘッダー全体に**グラデーション**を適用:

```css
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
```

- 開始色: 紫系（#667eea）
- 終了色: 青系（#764ba2）
- 方向: 左上から右下（135度）

### 4.2 影

ヘッダー下部に薄い影を表示し、コンテンツ領域との境界を明確化:

```css
box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
```

### 4.3 固定表示

ヘッダーは常に画面最上部に固定表示:

```css
position: fixed;
top: 0;
left: 0;
right: 0;
z-index: 1000;
```

---

## 5. レスポンシブ対応

### 5.1 デバイスごとの調整

| デバイス | ヘッダー高さ | ロゴサイズ | ボタンサイズ |
|---------|------------|----------|------------|
| **スマートフォン** | 56px | 140px × 36px | 36px × 36px |
| **タブレット** | 60px | 150px × 40px | 40px × 40px |
| **デスクトップ** | 64px | 160px × 44px | 44px × 44px |

### 5.2 小画面での最適化

スマートフォン（< 375px）では、以下の調整を行います:
- アプリ名のフォントサイズを16pxに縮小
- 言語切替ボタンを70px幅に縮小

---

## 6. インタラクション

### 6.1 ホバーエフェクト（PC/タブレット）

| 要素 | ホバー時の変化 |
|------|---------------|
| アプリ名 | カーソルがポインターに変化 |
| 通知ボタン | 背景色が半透明の白（rgba(255,255,255,0.2)）に変化 |
| 言語切替ボタン | 背景色が半透明の白（rgba(255,255,255,0.2)）に変化 |

### 6.2 タップフィードバック（モバイル）

ボタンをタップした瞬間、以下のフィードバックを表示:
- **背景色:** 一時的に半透明の白（rgba(255,255,255,0.3)）に変化
- **継続時間:** 150ms

---

## 7. アクセシビリティ

### 7.1 キーボードナビゲーション

| 操作 | 動作 |
|------|------|
| Tab キー | フォーカスが「ロゴ → 通知ボタン → 言語切替ボタン」の順に移動 |
| Enter / Space キー | フォーカス中のボタンを実行 |
| Esc キー | 開いているドロップダウンメニューを閉じる |

### 7.2 スクリーンリーダー対応

```html
<header role="banner" class="app-header">
  <a href="/home" aria-label="ホーム画面に戻る">
    <h1 class="app-title">セキュレアシティ</h1>
  </a>
  <button aria-label="通知 (未読3件)" class="notification-btn">
    🔔
    <span aria-hidden="true" class="notification-badge">3</span>
  </button>
  <button aria-label="言語切替" aria-haspopup="true" aria-expanded="false">
    JA ▼
  </button>
</header>
```

### 7.3 コントラスト比

すべてのテキストとアイコンは、WCAG 2.1 レベルAA準拠のコントラスト比を確保:
- **白色テキスト vs グラデーション背景:** 7.2:1（AAA準拠）

---

## 8. パフォーマンス

### 8.1 初期ロード

- ヘッダーは HTML 内に直接記述（JavaScript 不要）
- 未読件数のみ API 取得（非同期）

### 8.2 未読件数の取得

| 項目 | 値 |
|------|-----|
| **API エンドポイント** | `/api/notifications/unread-count` |
| **更新頻度** | 5分ごと、または画面遷移時 |
| **タイムアウト** | 3秒 |
| **エラー時の表示** | バッジを非表示 |

---

## 9. 実装例（HTML）

```html
<header class="app-header">
  <!-- アプリ名（ロゴ） -->
  <a href="/home" class="app-title-link">
    <h1 class="app-title">セキュレアシティ</h1>
  </a>

  <!-- 通知ボタン -->
  <button class="notification-btn" aria-label="通知 (未読3件)">
    <span class="notification-icon">🔔</span>
    <span class="notification-badge">3</span>
  </button>

  <!-- 言語切替ボタン -->
  <div class="language-switcher">
    <button class="language-btn" aria-haspopup="true" aria-expanded="false">
      <span class="language-code">JA</span>
      <span class="dropdown-icon">▼</span>
    </button>
    <ul class="language-menu" role="menu">
      <li role="menuitem"><button data-lang="ja">日本語 (JA)</button></li>
      <li role="menuitem"><button data-lang="en">English (EN)</button></li>
      <li role="menuitem"><button data-lang="zh">中文 (CN)</button></li>
    </ul>
  </div>
</header>
```

---

## 10. 関連ドキュメント

| ドキュメント名 | 説明 |
|--------------|------|
| `common-layout-v1_0.md` | 3層構造の全体設計 |
| `common-i18n-v1_0.md` | 言語切替・翻訳機能の詳細 |
| `common-notification-v1_0.md` | 通知機能の詳細 |
| `common-design-system-v1_0.md` | デザインシステム |
| `common-accessibility-v1_0.md` | アクセシビリティ要件 |

---

**文書管理**
- 文書ID: SEC-APP-COMMON-HEADER-001
- バージョン: 1.0
- 作成日: 2025年10月27日
- 承認者: （未定）
