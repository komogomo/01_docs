<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>セキュレアシティ スマートコミュニケーションアプリ 技術仕様書</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'Meiryo', sans-serif;
            line-height: 1.7;
            color: #1e293b;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 40px 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            overflow: hidden;
        }
        
        .header-banner {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 60px 60px 40px;
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .header-banner::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 600px;
            height: 600px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }
        
        .header-banner h1 {
            font-size: 36px;
            font-weight: 800;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
            letter-spacing: -0.5px;
        }
        
        .header-banner .subtitle {
            font-size: 18px;
            opacity: 0.95;
            position: relative;
            z-index: 1;
            font-weight: 500;
        }
        
        .content-wrapper {
            padding: 60px;
        }
        
        .document-info {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            padding: 30px;
            border-radius: 16px;
            margin-bottom: 50px;
            border-left: 5px solid #0ea5e9;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .document-info p {
            margin: 12px 0;
            font-size: 15px;
            display: flex;
            align-items: center;
        }
        
        .document-info strong {
            color: #0369a1;
            min-width: 140px;
        }
        
        .critical-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 3px solid #f59e0b;
            padding: 35px;
            margin: 40px 0;
            border-radius: 16px;
            box-shadow: 0 10px 15px -3px rgba(245, 158, 11, 0.1);
        }
        
        .critical-box h3 {
            color: #92400e;
            margin-bottom: 20px;
            font-size: 22px;
            font-weight: 700;
        }
        
        .critical-box p {
            margin: 15px 0;
            line-height: 1.8;
        }
        
        h2 {
            color: #1e40af;
            font-size: 28px;
            font-weight: 800;
            margin: 60px 0 30px;
            padding-bottom: 15px;
            border-bottom: 3px solid #dbeafe;
            position: relative;
        }
        
        h2::before {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 80px;
            height: 3px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        }
        
        h3 {
            color: #4338ca;
            font-size: 22px;
            font-weight: 700;
            margin: 40px 0 20px;
            padding-left: 15px;
            border-left: 4px solid #818cf8;
        }
        
        h4 {
            color: #6366f1;
            font-size: 18px;
            font-weight: 600;
            margin: 30px 0 15px;
        }
        
        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin: 30px 0;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        th {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            color: white;
            padding: 18px 20px;
            text-align: left;
            font-weight: 700;
            font-size: 15px;
            letter-spacing: 0.3px;
        }
        
        td {
            padding: 18px 20px;
            border-bottom: 1px solid #e2e8f0;
            background: white;
            transition: background 0.2s;
        }
        
        tr:hover td {
            background: #f8fafc;
        }
        
        tr:last-child td {
            border-bottom: none;
        }
        
        .feature-box {
            background: linear-gradient(135deg, #fefce8 0%, #fef9c3 100%);
            border-left: 5px solid #eab308;
            padding: 25px 30px;
            margin: 25px 0;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(234, 179, 8, 0.1);
        }
        
        .note-box {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border-left: 5px solid #22c55e;
            padding: 25px 30px;
            margin: 25px 0;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(34, 197, 94, 0.1);
        }
        
        .warning-box {
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
            border-left: 5px solid #ef4444;
            padding: 25px 30px;
            margin: 25px 0;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(239, 68, 68, 0.1);
        }
        
        .info-box {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border-left: 5px solid #3b82f6;
            padding: 25px 30px;
            margin: 25px 0;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.1);
        }
        
        .security-box {
            background: linear-gradient(135deg, #fdf4ff 0%, #fae8ff 100%);
            border-left: 5px solid #c026d3;
            padding: 25px 30px;
            margin: 25px 0;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(192, 38, 211, 0.1);
        }
        
        .value-box {
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border: 3px solid #10b981;
            padding: 35px;
            margin: 40px 0;
            border-radius: 16px;
            box-shadow: 0 10px 15px -3px rgba(16, 185, 129, 0.1);
        }
        
        .value-box h3 {
            color: #065f46;
            border-left: none;
            padding-left: 0;
            margin-bottom: 20px;
        }
        
        ul {
            margin: 20px 0;
            padding-left: 0;
            list-style: none;
        }
        
        ul li {
            margin: 12px 0;
            padding-left: 30px;
            position: relative;
            line-height: 1.7;
        }
        
        ul li::before {
            content: '→';
            position: absolute;
            left: 0;
            color: #667eea;
            font-weight: bold;
        }
        
        .value-box ul li::before {
            content: '?';
            color: #10b981;
        }
        
        .priority-high {
            display: inline-block;
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 13px;
            letter-spacing: 0.3px;
        }
        
        .priority-medium {
            display: inline-block;
            background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 13px;
            letter-spacing: 0.3px;
        }
        
        .priority-low {
            display: inline-block;
            background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 13px;
            letter-spacing: 0.3px;
        }
        
        code {
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            padding: 3px 8px;
            border-radius: 6px;
            font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Courier New', monospace;
            font-size: 14px;
            color: #64748b;
            border: 1px solid #cbd5e1;
        }
        
        pre {
            background: #1e293b;
            color: #e2e8f0;
            padding: 25px;
            border-radius: 12px;
            overflow-x: auto;
            margin: 25px 0;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
            font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
        }
        
        .phase-diagram {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border: 2px solid #cbd5e1;
            padding: 30px;
            margin: 30px 0;
            font-family: 'SF Mono', Monaco, 'Courier New', monospace;
            white-space: pre-line;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            font-size: 14px;
            line-height: 1.8;
        }
        
        .star-rating {
            color: #f59e0b;
            font-size: 20px;
            letter-spacing: 2px;
        }
        
        .toc {
            background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
            padding: 30px 40px;
            border-radius: 16px;
            margin: 40px 0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .toc ul {
            list-style: decimal;
            padding-left: 25px;
        }
        
        .toc li {
            padding-left: 10px;
            margin: 15px 0;
            font-size: 16px;
            font-weight: 600;
        }
        
        .toc li::before {
            content: none;
        }
        
        .footer {
            margin-top: 80px;
            padding: 40px 0;
            border-top: 2px solid #e2e8f0;
            text-align: center;
            color: #64748b;
        }
        
        .footer p {
            margin: 10px 0;
            font-size: 14px;
        }
        
        .section-divider {
            height: 2px;
            background: linear-gradient(90deg, transparent 0%, #667eea 50%, transparent 100%);
            margin: 60px 0;
        }
        
        strong {
            color: #1e40af;
            font-weight: 700;
        }
        
        @media print {
            body {
                background: white;
                padding: 0;
            }
            
            .container {
                box-shadow: none;
                border-radius: 0;
            }
            
            .header-banner {
                background: #1e40af;
            }
        }
        
        @media (max-width: 768px) {
            .content-wrapper {
                padding: 30px 20px;
            }
            
            .header-banner {
                padding: 40px 20px 30px;
            }
            
            .header-banner h1 {
                font-size: 28px;
            }
            
            h2 {
                font-size: 24px;
            }
            
            table {
                font-size: 14px;
            }
            
            th, td {
                padding: 12px 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header-banner">
            <h1>セキュレアシティ<br>スマートコミュニケーションアプリ</h1>
            <div class="subtitle">技術仕様書（デモ版）- 最終版 v3.1</div>
        </div>
        
        <div class="content-wrapper">
            <div class="document-info">
                <p><strong>プロジェクト名</strong>セキュレアシティ スマートコミュニケーションアプリ</p>
                <p><strong>文書バージョン</strong>3.1（最終版）</p>
                <p><strong>作成日</strong>2025年10月14日</p>
                <p><strong>対象</strong>デモ版開発・公開（概念実証）</p>
                <p><strong>想定利用者</strong>最大10名</p>
                <p><strong>開発期間</strong>約3-3.5ヶ月</p>
            </div>

            <div class="critical-box">
                <h3>【重要】本仕様書のスコープと制約事項</h3>
                <p><strong>1. 開発目的</strong></p>
                <p>本プロジェクトは「デモ公開」を目的とし、限定された利用者（最大10名）による概念実証（PoC）を実施するためのものである。</p>
                
                <p><strong>2. 正式サービス展開について</strong></p>
                <p>本デモ実施後、フィードバックに基づき正式サービス展開を判断する。正式展開時には以下を再検討する：</p>
                <ul>
                    <li>インフラ構成（スケールアップ/アウト）</li>
                    <li>可用性要件（99.9%等への引き上げ）</li>
                    <li>セキュリティ強化（WAF、DDoS対策等）</li>
                    <li>運用体制（24時間監視等）</li>
                    <li>データバックアップ頻度</li>
                </ul>
                
                <p><strong>3. コスト方針</strong></p>
                <p>デモ段階ではコストを最小限に抑え（月額約1,000円）、正式展開時に必要なリソースを投入する。</p>
            </div>

            <div class="toc">
                <h3 style="margin-bottom: 20px; color: #6366f1; border: none; padding: 0;">目次</h3>
                <ul>
                    <li><strong>プロジェクトの背景と核心価値（最重要）</strong></li>
                    <li><strong>AIコラボレーション開発原則</strong></li>
                    <li><strong>開発環境と構成（デバッグ回避戦略）</strong></li>
                    <li><strong>アプリケーションアーキテクチャと持続性</strong></li>
                    <li><strong>非機能要件（N-Reqs）とコスト試算</strong></li>
                </ul>
            </div>

            <div class="section-divider"></div>

            <h2>0. プロジェクトの背景と核心価値（最重要）</h2>

            <div class="value-box">
                <h3>本プロジェクトの本質的課題と解決策</h3>
                
                <h4 style="color: #065f46; margin-top: 25px;">現状の課題</h4>
                <p>セキュレアシティには多数の外国人居住者が居住しており、言語の壁により以下の深刻な問題が発生している：</p>
                <ul>
                    <li>日本人住民と外国人住民のコミュニケーション不全</li>
                    <li>お知らせや回覧板が外国人住民に届かない</li>
                    <li>コミュニティの分断、孤立感の発生</li>
                    <li>トラブル発生時の意思疎通困難</li>
                    <li>生活情報の共有ができず、不便な生活を強いられる</li>
                </ul>

                <h4 style="color: #065f46; margin-top: 25px;">本プロジェクトの核心的価値</h4>
                <p>本アプリは単なる「便利ツール」ではなく、<strong style="color: #065f46;">言語の壁を越えた住民間コミュニケーションの実現</strong>を目的とした、コミュニティ統合プラットフォームである。</p>

                <h4 style="color: #065f46; margin-top: 25px;">最重要機能：掲示板 + リアルタイム翻訳</h4>
                <p><strong style="color: #065f46;">これが本プロジェクトの最大のセールスポイント</strong></p>
                <ul>
                    <li>日本語で投稿された内容を英語・中国語にリアルタイム翻訳</li>
                    <li>外国人住民の投稿を日本語にリアルタイム翻訳</li>
                    <li>ボタン一つで相互理解を実現</li>
                    <li>「譲ります・探しています」「子育て情報交換」「災害時の安否確認」など、生活に密着したコミュニケーション</li>
                    <li>言語の壁を感じさせない、シームレスな住民交流</li>
                </ul>

                <div style="background: white; padding: 20px; margin-top: 25px; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                    <p style="margin: 0; font-weight: bold; color: #059669; font-size: 16px;">→ デモ版でこの価値を最優先で実証する</p>
                    <p style="margin: 8px 0 0 0; font-weight: bold; color: #059669; font-size: 16px;">→ 掲示板機能に開発工数の最大リソースを投入（0.8人月）</p>
                </div>
            </div>

            <div class="section-divider"></div>

            <h2>I. AIコラボレーション開発原則（最重要）</h2>

            <h3>1. 開発スキームの核となる哲学：動作保証主義</h3>
            <p>本開発モデルは、従来の「AIはサポートツール」という位置づけを根本から変革し、<strong>「人間は創造性と戦略、AIは堅牢な実装と論理処理」</strong>という最適な役割分担を確立します。</p>
            
            <p style="margin-top: 20px;">特に、本プロジェクトでは<strong>「動作保証主義」</strong>を採用します。これは、人間による詳細なコードレビューの工数を最小化し、代わりに<strong>「アプリケーションが要件通りに動作するか」という最終的な挙動の確認</strong>に人間のリソースを集中させるアプローチです。</p>

            <div class="info-box">
                <h4>人間の役割：本質的価値の創造と最終承認</h4>
                <ul>
                    <li><strong>ユーザー価値の探求</strong>「何がユーザーにとって本当に価値があるか」という数値化困難な本質的課題への注力</li>
                    <li><strong>戦略的意思決定</strong>プロダクトの方向性、優先順位、ビジネス判断などの高次意思決定</li>
                    <li><strong>受入テストと品質保証</strong>AIが実装した機能が要件通りに動作することをブラックボックステストで確認し、最終的な品質を保証する</li>
                </ul>
            </div>

            <div class="info-box" style="margin-top: 20px;">
                <h4>AIの役割：論理的実装の完全自動化</h4>
                <ul>
                    <li><strong>コード生成の自動化</strong>React Native、NestJS、Prismaなど全レイヤーのコード生成</li>
                    <li><strong>テストコード生成</strong>単体テスト、統合テストコードの自動生成と実行</li>
                    <li><strong>デバッグとメンテナンス</strong>エラー解析、修正案の提示、リファクタリング、将来のコードメンテナンス</li>
                    <li><strong>ドキュメント生成</strong>技術仕様書、API仕様、運用手順書の自動生成</li>
                </ul>
            </div>

            <h3>2. 移行工数（3.2人月）における役割分担マトリクス</h3>

            <table>
                <thead>
                    <tr>
                        <th>作業領域</th>
                        <th>人間（発注者）の作業</th>
                        <th>AI（Gemini）の役割</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>コード生成・実装</strong></td>
                        <td>・AIへの機能要件指示（プロンプト作成）<br>・コードレビューは原則行わない<br>・手動でのファイル配置・統合（物理操作）</td>
                        <td>・React Native/Flutterコードの生成<br>・NestJS APIの実装<br>・Prismaスキーマとマイグレーション<br>・状態管理の実装</td>
                    </tr>
                    <tr>
                        <td><strong>計画・設計</strong></td>
                        <td>・要件の指示と優先順位決定<br>・設計レビューと最終仕様の意思決定</td>
                        <td>・技術選定と根拠の提示<br>・アーキテクチャ設計案の生成<br>・設定ファイルの自動生成<br>・データベーススキーマ設計</td>
                    </tr>
                    <tr>
                        <td><strong>テスト・品質</strong></td>
                        <td>・受入テスト（動作確認）の実施<br>・AIにテストパターン案を出させ、人間が精査<br>・最終的な品質判断</td>
                        <td>・単体・結合テストコードの生成<br>・総合テストの操作パターン案作成<br>・バグ修正案の提示</td>
                    </tr>
                    <tr>
                        <td><strong>リリース工程</strong></td>
                        <td>・ストア申請手続きの実行<br>・契約・法務対応<br>・ストア情報の手動入力</td>
                        <td>・ストア公開手順書の生成<br>・リリースノートの作成<br>・申請用文章の生成</td>
                    </tr>
                </tbody>
            </table>

            <div class="note-box">
                <strong>AI支援による効率化効果：</strong>
                <ul>
                    <li>従来のフルスクラッチ開発：約6-7人月</li>
                    <li>AIコラボレーション開発：約3.2人月</li>
                    <li><strong style="color: #16a34a;">工数削減率：約50%</strong></li>
                </ul>
            </div>

            <div class="section-divider"></div>

            <h2>II. 開発環境と構成（デバッグ回避戦略）</h2>

            <h3>1. 開発環境の選定理由と推奨構成</h3>

            <div class="feature-box">
                <h4 style="color: #92400e;">要件</h4>
                <ul>
                    <li>Windows端末で開発を行う</li>
                    <li>実行環境はLinux系とする（本番環境との互換性確保）</li>
                    <li>無償で利用できる</li>
                    <li>Prismaパス解決問題の回避</li>
                    <li>WEB公開環境（LightSail Linux）への移行性を最重視</li>
                </ul>
            </div>

            <h4>開発環境の比較検討</h4>

            <table>
                <thead>
                    <tr>
                        <th>選択肢</th>
                        <th>無償性</th>
                        <th>移行性</th>
                        <th>性能</th>
                        <th>総合評価</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>A. WSL2 + Ubuntu 22.04</strong></td>
                        <td>◎ 完全無償</td>
                        <td>◎ 完璧</td>
                        <td>◎ 高速</td>
                        <td><span class="star-rating">★★★</span> <strong>最推奨</strong></td>
                    </tr>
                    <tr>
                        <td><strong>B. VMware Workstation Player + Ubuntu 22.04</strong></td>
                        <td>○ Player版無償（個人利用）</td>
                        <td>◎ 完璧</td>
                        <td>○ 中速</td>
                        <td><span class="star-rating">★★☆</span> 推奨</td>
                    </tr>
                    <tr>
                        <td><strong>C. VirtualBox + Ubuntu 22.04</strong></td>
                        <td>◎ 完全無償</td>
                        <td>◎ 完璧</td>
                        <td>○ 中速</td>
                        <td><span class="star-rating">★★☆</span> 可</td>
                    </tr>
                    <tr>
                        <td>D. Windows直接（Prisma問題あり）</td>
                        <td>◎ 無償</td>
                        <td>? 問題あり</td>
                        <td>◎ 高速</td>
                        <td><span class="star-rating">★☆☆</span> 非推奨</td>
                    </tr>
                </tbody>
            </table>

            <h3>2. 第1推奨：WSL2 + Ubuntu 22.04 LTS</h3>

            <div class="info-box">
                <h4>推奨構成</h4>
                <pre>Windows 10/11（ホストOS）
  └─ WSL2 (Windows Subsystem for Linux)
      └─ Ubuntu 22.04 LTS
          ├─ Node.js LTS
          ├─ PostgreSQL 14+
          ├─ Prisma
          └─ NestJS

【開発ツール】
VS Code (Windows側にインストール)
  └─ 拡張機能：Remote - WSL
      → WSL内のコードを直接編集

【移行性】
開発環境 (WSL2/Ubuntu) → 本番環境 (LightSail/Ubuntu)
完全互換！

【コスト】
完全無償（0円）</pre>
            </div>

            <h4>WSL2を第1推奨とする理由</h4>
            <ul>
                <li><strong>完全無償</strong>Windows 10/11に標準搭載</li>
                <li><strong>追加VM不要</strong>ディスク容量節約</li>
                <li><strong>ネイティブLinuxカーネル</strong>完全な互換性</li>
                <li><strong>VS Code統合が優秀</strong>Remote - WSL拡張でシームレスな開発体験</li>
                <li><strong>Windowsとのファイル共有が容易</strong></li>
                <li><strong>パフォーマンスが高速</strong>Hyper-V基盤</li>
                <li><strong>LightSail環境と完全互換</strong></li>
                <li><strong>Prismaパス問題が発生しない</strong></li>
            </ul>

            <h4>セットアップ手順（簡単）</h4>
            <pre># 1. PowerShell（管理者権限）で実行
wsl --install -d Ubuntu-22.04

# 2. 再起動後、Ubuntuが起動
# ユーザー名・パスワード設定

# 3. VS Codeで接続
# 拡張機能「Remote - WSL」をインストール
# WSL環境で開発開始</pre>

            <div class="section-divider"></div>

            <h2>III. アプリケーションアーキテクチャと持続性</h2>

            <h3>1. 技術スタックと各レイヤーの持続性への貢献</h3>

            <table>
                <thead>
                    <tr>
                        <th>レイヤー</th>
                        <th>技術</th>
                        <th>持続性・堅牢性への貢献</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>バックエンド/制御層</td>
                        <td>NestJS (TypeScript)</td>
                        <td><strong>【堅牢性】</strong>TypeScriptの静的型付けによりバグを開発時点で検出、モジュール構造により長期保守性を確保<br><strong>【生産性】</strong>依存性注入によりテスタビリティ向上</td>
                    </tr>
                    <tr>
                        <td>データアクセス層</td>
                        <td>Prisma ORM</td>
                        <td><strong>【保守性】</strong>DB抽象化により、将来的なDB変更時のコード書き換え工数を最小化<br><strong>【安全性】</strong>型安全なクエリによりSQLインジェクション防止</td>
                    </tr>
                    <tr>
                        <td>データベース層</td>
                        <td>PostgreSQL</td>
                        <td><strong>【持続性】</strong>成熟したRDBMS（30年の実績）、ACID特性によるデータ整合性<br><strong>【拡張性】</strong>JSONBによる柔軟なスキーマ拡張</td>
                    </tr>
                    <tr>
                        <td>アーキテクチャ構造</td>
                        <td>モジュラーモノリス</td>
                        <td><strong>【拡張性】</strong>機能ごとに独立したモジュールとして構成<br><strong>【保守性】</strong>単一デプロイにより運用負荷を削減</td>
                    </tr>
                    <tr>
                        <td>フロントエンド</td>
                        <td>React Native + i18next + Zustand</td>
                        <td><strong>【移行性】</strong>ネイティブ化への移行工数を最小化<br><strong>【堅牢性】</strong>シンプルかつ効率的な状態管理</td>
                    </tr>
                </tbody>
            </table>

            <h3>2. モジュラーモノリス設計の具体例</h3>

            <pre>src/
├── common/                  # 共通モジュール
│   ├── auth/               # 認証（マジックリンク）
│   ├── i18n/               # 多言語対応
│   ├── translation/        # Google Translation API連携
│   ├── notification/       # 通知基盤（メール送信など）
│   └── ...
├── modules/                # 機能モジュール（タイル）
│   ├── announcement/       # お知らせ・回覧板
│   ├── parking/            # 駐車場予約
│   ├── bbs/                # 掲示板（最重要）
│   └── user/               # ユーザー管理
├── prisma/                 # データベーススキーマ
└── main.ts                 # アプリケーションエントリポイント</pre>

            <div class="note-box">
                <strong>モジュラー設計の利点：</strong>
                <ul>
                    <li>各機能モジュールが独立しており、他モジュールへの影響を最小化できます</li>
                    <li>新規機能追加時は新しいモジュールディレクトリを追加するだけで済みます</li>
                    <li>テストも機能単位で完結し、保守性が向上します</li>
                    <li><strong>メール送信基盤などの特定機能の差し替えが容易</strong>になり、将来の技術変更（例: Gmail SMTP → AWS SES）に低コストで対応できます</li>
                </ul>
            </div>

            <div class="section-divider"></div>

            <h2>IV. 非機能要件（N-Reqs）とコスト試算</h2>

            <h3>1. デモ版機能スコープと優先順位</h3>

            <table>
                <thead>
                    <tr>
                        <th>機能</th>
                        <th>優先度</th>
                        <th>デモ版</th>
                        <th>理由</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>1. 掲示板（BBS）+ リアルタイム翻訳 + 多言語UI</strong></td>
                        <td><span class="priority-high">★★★ 最重要</span></td>
                        <td>◎ 完全実装</td>
                        <td>本プロジェクトの核心価値、最大のセールスポイント、外国人居住者とのコミュニケーション促進</td>
                    </tr>
                    <tr>
                        <td><strong>2. ユーザー認証（マジックリンク）</strong></td>
                        <td><span class="priority-high">★★★</span></td>
                        <td>◎ 完全実装</td>
                        <td>基盤機能として必須</td>
                    </tr>
                    <tr>
                        <td><strong>3. お知らせ・回覧板 + 多言語対応</strong></td>
                        <td><span class="priority-medium">★★☆</span></td>
                        <td>◎ 完全実装</td>
                        <td>運営→住民への情報伝達、多言語対応必須</td>
                    </tr>
                    <tr>
                        <td><strong>4. 駐車場予約（基本）</strong></td>
                        <td><span class="priority-low">★☆☆</span></td>
                        <td>○ 基本実装</td>
                        <td>利便性向上、リマインダー等は正式版で</td>
                    </tr>
                    <tr>
                        <td><strong>5. 管理者機能（最小限）</strong></td>
                        <td><span class="priority-high">★★★</span></td>
                        <td>◎ 必須実装</td>
                        <td>デモ運用に必須</td>
                    </tr>
                </tbody>
            </table>

            <h3>2. 開発工数とスケジュール</h3>

            <table>
                <thead>
                    <tr>
                        <th>作業項目</th>
                        <th>工数</th>
                        <th>備考</th>
                    </tr>
                </thead>
                <tbody>
                    <tr style="background: #e0e7ff;">
                        <td colspan="3" style="font-weight: bold; color: #1e40af;">【Phase 1: デモ版MVP】</td>
                    </tr>
                    <tr>
                        <td><strong>1. 基盤構築</strong>（開発環境構築、プロジェクト初期設定、DB設計）</td>
                        <td>0.3人月</td>
                        <td>WSL2/NestJS/Prisma</td>
                    </tr>
                    <tr>
                        <td><strong>2. 認証機能</strong></td>
                        <td>0.3人月</td>
                        <td>マジックリンク、メール送信基盤</td>
                    </tr>
                    <tr>
                        <td><strong>3. 多言語基盤</strong></td>
                        <td>0.2人月</td>
                        <td>翻訳マスタ、Google Translation API</td>
                    </tr>
                    <tr>
                        <td><strong>4. 掲示板機能（最重要）</strong></td>
                        <td><strong style="color: #dc2626;">0.8人月</strong></td>
                        <td>スレッド投稿・一覧、コメント、リアルタイム翻訳ボタン、画像添付、通報機能、権限制御</td>
                    </tr>
                    <tr>
                        <td><strong>5. お知らせ・回覧板</strong></td>
                        <td>0.3人月</td>
                        <td>管理者投稿、住民閲覧、既読管理</td>
                    </tr>
                    <tr>
                        <td><strong>6. 駐車場予約（基本版）</strong></td>
                        <td>0.4人月</td>
                        <td>カレンダー、予約・キャンセル、メール通知</td>
                    </tr>
                    <tr>
                        <td><strong>7. 管理者機能（最小限）</strong></td>
                        <td>0.2人月</td>
                        <td>ユーザー管理、コンテンツ管理</td>
                    </tr>
                    <tr style="background: #f3f4f6;">
                        <td style="font-weight: bold;">小計（開発）</td>
                        <td style="font-weight: bold;">2.5人月</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td><strong>8. テスト・デバッグ</strong>（AIテスト＋人間による受入テスト）</td>
                        <td>0.4人月</td>
                        <td>特に翻訳機能の動作確認</td>
                    </tr>
                    <tr>
                        <td><strong>9. デプロイ・環境構築</strong></td>
                        <td>0.2人月</td>
                        <td>LightSail設定、Nginx、SSL</td>
                    </tr>
                    <tr>
                        <td><strong>10. ドキュメント作成</strong></td>
                        <td>0.1人月</td>
                        <td>マニュアル、運用手順書</td>
                    </tr>
                    <tr style="background: #dbeafe;">
                        <td style="font-weight: bold;">合計（デモ版）</td>
                        <td style="font-weight: bold;">3.2人月</td>
                        <td style="font-weight: bold;">AI支援込み</td>
                    </tr>
                    <tr style="background: #dbeafe;">
                        <td style="font-weight: bold;">リードタイム</td>
                        <td style="font-weight: bold;">12-14週間</td>
                        <td style="font-weight: bold;">約3-3.5ヶ月</td>
                    </tr>
                </tbody>
            </table>

            <h3>3. コスト試算（デモ版）</h3>

            <h4>月額ランニングコスト</h4>
            <table>
                <thead>
                    <tr>
                        <th>項目</th>
                        <th>月額</th>
                        <th>備考</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>LightSail $5プラン</td>
                        <td>750円</td>
                        <td>1GB RAM、1 vCPU、40GB SSD<br>※為替レート$1=\150想定</td>
                    </tr>
                    <tr>
                        <td>Google Translation API</td>
                        <td>0円</td>
                        <td>無料枠内（月50万文字）<br>※掲示板使用で月3.5万文字想定</td>
                    </tr>
                    <tr>
                        <td>ドメイン</td>
                        <td>125円</td>
                        <td>年額1,500円（.comドメイン）</td>
                    </tr>
                    <tr>
                        <td>SSL証明書</td>
                        <td>0円</td>
                        <td>Let's Encrypt（無料・自動更新）</td>
                    </tr>
                    <tr>
                        <td>メール送信</td>
                        <td>0円</td>
                        <td>Gmail SMTP（10名なら無料枠内）</td>
                    </tr>
                    <tr style="background: #dbeafe;">
                        <td style="font-weight: bold;">合計</td>
                        <td style="font-weight: bold;">875円</td>
                        <td style="font-weight: bold;">月額</td>
                    </tr>
                </tbody>
            </table>

            <div class="value-box" style="margin-top: 40px;">
                <h3>まとめ：本スキームの戦略的価値</h3>
                
                <h4 style="color: #065f46;">1. 社会的価値</h4>
                <ul>
                    <li><strong>言語の壁を越えたコミュニティ統合</strong></li>
                    <li><strong>外国人居住者の孤立解消</strong></li>
                    <li><strong>住民間の相互理解促進</strong></li>
                    <li><strong>多文化共生社会の実現</strong></li>
                </ul>

                <h4 style="color: #065f46; margin-top: 25px;">2. 技術的堅牢性</h4>
                <ul>
                    <li><strong>デバッグコスト最小化</strong>Linux開発環境により環境起因のバグを根絶</li>
                    <li><strong>長期保守性</strong>TypeScript、NestJS、Prismaによる型安全な実装</li>
                    <li><strong>拡張性</strong>モジュラーモノリスにより機能追加・変更が容易</li>
                    <li><strong>AIコラボレーション</strong>開発工数50%削減と品質の均一化</li>
                </ul>

                <h4 style="color: #065f46; margin-top: 25px;">3. コスト効率性</h4>
                <ul>
                    <li><strong>開発工数50%削減</strong>AIコラボレーションにより3.2人月で実現</li>
                    <li><strong>インフラコスト最小化</strong>月額約875円で全環境を運用</li>
                    <li><strong>翻訳コスト0円</strong>Google Translation API無料枠内で運用</li>
                    <li><strong>従量課金リスク排除</strong>固定料金制により予算管理が容易</li>
                </ul>
            </div>

            <div class="footer">
                <div style="height: 2px; background: linear-gradient(90deg, transparent 0%, #667eea 50%, transparent 100%); margin-bottom: 30px;"></div>
                <p><strong>文書管理番号</strong>SEC-APP-SPEC-003-FINAL-rev1</p>
                <p><strong>承認者</strong>____________________　<strong>日付</strong>____________________</p>
                <p style="margin-top: 20px;">本仕様書に関する問い合わせ：プロジェクトチーム</p>
            </div>
        </div>
    </div>
</body>
</html>