# HarmoNet 開発方針共有メモ（2025-11-01）

## 1. 現状の開発状況
| 機能 | 状態 | 補足 |
|------|------|------|
| ログイン | 完成 | MagicLink方式。テナント単位で認証設定を持つ。 |
| ホーム | 完成 | ウィジェット構成確定済み。 |
| 掲示板 | 完成 | PDFプレビュー仕様含む。 |
| 掲示板詳細 | 完成 | 翻訳キャッシュ／コメント設定まで完備。 |
| 施設予約 | 設計途中 | 予約枠・承認制・利用制限項目が未確定。 |
| アンケート | 未設計 | フレームのみ存在。 |
| 管理者機能 | 未着手 | 今回の追加要件として策定対象。 |

---

## 2. 上流工程の扱い方針
- 既存の上流設計書（SRD, 機能詳細）は**凍結**扱いとする。  
- 新しく作り直さず、**追加要件ドキュメント方式**で管理者機能を策定。  
- 上流リセットは行わず、既存INPUTを活かして下流へ接続する。

📘 新設予定ファイル：
- `harmonet-admin-feature-requirements_v1.0.md`  
　→ 管理者機能およびテナント設定項目を統合定義する文書。

---

## 3. 設計アプローチ方針
### (1) フレームワーク／方式
Next.js + NestJS + Prisma（スキーマ駆動開発）で確定。

### (2) 中心課題
「画面単位設計」から「テナント設定主導設計」へ転換。  
→ 各テナントで必要な設定項目を定義し、それを中心にDB構造を組み立てる。

### (3) スキーマを中核に
スキーマ完成＝実装開始可能。  
スキーマ更新は開発中も柔軟に行い、A5出力を納品用正式成果物とする。

---

## 4. テナント設定項目の設計方針（初期分類）
| 区分 | 主な項目例 | 補足 |
|------|-------------|------|
| 認証／ログイン | 認証方式、ログインTTL、デフォルト言語 | セキュリティ方針単位 |
| ホーム画面 | 表示ウィジェット、順序、件数 | UI設定中心 |
| 掲示板 | カテゴリ、添付許可、翻訳ボタン、承認フロー | 管理者設定 |
| 掲示板詳細 | コメント許可、翻訳キャッシュ期間、通知連携 | 詳細制御 |
| 施設予約 | 区分、予約単位、予約制限日数、承認方式、上限 | 構造未確定、優先設計対象 |
| テナント共通 | 名称・住所、容量上限、言語構成、ロゴ | 全体設定 |

📘 新設予定ファイル：
- `harmonet-tenant-config-schema_v1.0.md`  
　→ テナント設定項目一覧とスキーマ設計方針を定義。

---

## 5. 各AIチームの役割と連携フロー

| AI | 役割 | 現行タスク | 主な出力 |
|----|------|-------------|----------|
| **Claude** | 構造設計・スキーマ生成 | 管理者機能要件・設定項目を元に初期スキーマ作成 | `tenant_settings`ほか関連テーブル草案 |
| **タチコマ（GPT）** | 整合性・文書統合 | 命名規約・共通属性統一、AI間文書生成 | `harmonet-admin-feature-requirements_v1.0.md` / `harmonet-tenant-config-schema_v1.0.md` |
| **Gemini** | 静的監査・BAG解析 | スキーマと実装コードの整合監査（開発後） | `bag-validation-report.json` |

---

## 6. 今後の進行ステップ
1. **TKD**  
　– テナント設定項目リスト（v0.1）を作成。  
　– 特に施設予約・アンケート関連を優先。  
2. **Claude**  
　– 設定項目リストから初期スキーマ草案を生成。  
3. **タチコマ**  
　– Claudeのスキーマを整合レビューし正式ドキュメント化。  
4. **Gemini**  
　– 実装後にBAG解析による監査を実施。

---

## 7. 方針まとめ
> - 上流設計は再構築せず、追加要件ドキュメントで拡張。  
> - 管理者機能とテナント設定を先に定義。  
> - スキーマを中核に据えて実装を進める。  
> - 完成したスキーマが最終的な「正」となる。  
> - AIチームは設計 → 整合 → 監査の三層で連携する。

---

### 次アクション
- TKD：テナント設定項目リストを起こす（v0.1）。  
- Claude：スキーマ初案生成準備。  
- タチコマ：管理者機能要件書テンプレート作成。  
- Gemini：BAG解析仕様の準備（監査フェーズ向け）。

---

**Document ID:** `HNM-DEV-SUMMARY-20251101`  
**Created:** 2025-11-01  
**Author:** HarmoNet AI Team（TKD / Claude / タチコマ / Gemini）  
**Version:** 1.0
