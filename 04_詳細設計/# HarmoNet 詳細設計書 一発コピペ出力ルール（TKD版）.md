# HarmoNet 詳細設計書 一発コピペ出力ルール（TKD版）

**Document ID:** HARMONET-DETAIL-DESIGN-OUTPUT-RULES
**Version:** 1.0
**Created:** 2025-11-11
**Author:** Tachikoma
**Reviewer:** TKD
**Status:** ✅ 承認提案中（正式ルール）

---

## 1. 基本方針

1. **一括コピー可能:** 設計書は必ず1つのMarkdownブロックで出力。ページ分割・折返しは禁止。DLリンク形式も添付可能。
2. **アジェンダ準拠:** `harmonet-detail-design-agenda-standard_v1.0` に完全準拠。章構成・節番号・UT観点・ChangeLog構成を固定。
3. **出力内容密度:** ch01〜ch06で同等の密度を維持。処理フロー、Props仕様、イベント・ハンドラ、依存関係、再レンダー設計を省略不可。
4. **テスト観点統一:** UT観点、異常操作、翻訳切替、ロール別表示、再レンダー抑制は全チャプター共通。
5. **Props定義:** TypeScriptコードブロックで明示。必須/任意/デフォルト値を記載。想定外入力・例外処理も明記。
6. **Mermaid利用:** 構造設計・処理フローは必ずMermaidで図示。階層構造・依存関係を可視化。
7. **UT観点:** `2.6 人間操作に基づくUT観点（最小セット）` を必ず記載。テスト観点ID、操作内容、期待結果、テスト目的を表形式で統一。
8. **ChangeLog:** ch01〜ch06のChangeLogは統一。バージョン・作成日・更新日・変更点を表形式で記載。
9. **出力形式:** Markdown形式（.md）で統一。ファイル名は `_vX.Y.md` 形式。文書内リンクは `_latest.md` 形式。
10. **DLリンク提供:** 出力時、画面表示不要で `📎 DLリンク` を添付可能。ダウンロード操作はTKD側で実施。

---

## 2. 運用ルール

| 項目        | 内容                            |
| --------- | ----------------------------- |
| 出力単位      | 1ファイル・1Markdownブロック           |
| バージョン更新   | 既存ファイル名でVersion/ChangeLog更新のみ |
| 分割出力      | 原則禁止                          |
| チャプター密度   | ch01〜ch06で均一化                 |
| UT観点      | 全チャプター必須                      |
| 依存関係図     | Mermaidで明示                    |
| Props仕様   | TypeScript + 解説表で明示           |
| ChangeLog | 全章共通形式                        |

---

## 3. 注意事項

1. TKD指示なしでAIが独自に章を省略したり密度を下げることは禁止。
2. 過去チャットで分割出力していた理由はコンテキスト制限・チャット長制限による。
3. この方式を採用すれば、TKDが長時間コピー作業を行う必要はない。
4. 以後、全ての詳細設計書作成時に本ルールを適用。
