# B-03 BoardPostForm 詳細設計書 ch07 関連資料・トレーサビリティ v1.1

**Document ID:** HARMONET-COMPONENT-B03-BOARDPOSTFORM-DETAIL-CH07
**Version:** 1.1
**Supersedes:** v1.0
**Created:** 2025-11-22
**Updated:** 2025-11-23
**Author:** Tachikoma
**Reviewer:** TKD
**Status:** Draft

---

## 7.1 本章の目的

本章では、B-03 BoardPostForm に関する設計情報の参照関係を整理し、

* 上位要件・基本設計との対応
* 関連コンポーネント・サービスとのインタフェース
* 実装・テスト指示書との紐づけ

を明示する。これにより、BoardPostForm に関する変更時に参照すべき資料を特定しやすくする。

---

## 7.2 上位文書との対応

### 7.2.1 要件定義書

| 分類   | ドキュメント名                               | 主な対応内容              |
| ---- | ------------------------------------- | ------------------- |
| 要件定義 | `functional-requirements-all_v1.6.md` | 掲示板機能の投稿・**編集**要件・権限・回覧板要件 |

BoardPostForm は、上記要件定義書に記載された「掲示板への投稿」「**投稿の編集（本人限定）**」「回覧板としての扱い」「添付ファイル要件」に対応するフロントエンドコンポーネントとして実装する。

### 7.2.2 基本設計書

| 分類   | ドキュメント名                                              | 主な対応内容                 |
| ---- | ---------------------------------------------------- | ---------------------- |
| 基本設計 | `HarmoNet-bbs-board Design-decision-summary_v1.0.md` | 掲示板画面構成、投稿フォームのレイアウト方針 |

BoardPostForm の画面構成・入力項目・権限制御は、掲示板基本設計書に記載された画面構成・ロール別機能一覧に基づいている。

---

## 7.3 関連コンポーネント・サービス

### 7.3.1 画面構成上の関連コンポーネント

| コンポーネント ID | 名称                 | 役割                          | 参照詳細設計書                                |
| ---------- | ------------------ | --------------------------- | -------------------------------------- |
| A-00       | LoginPage          | ログイン画面。認証後に掲示板ホームに遷移する。     | `A-00_LoginPage-detail-design_v1.4.md` |
| B-01       | BoardTop           | 掲示板一覧画面。新規投稿ボタンから B-03 を起動。 | （別途 B-01 詳細設計書を参照）                     |
| B-02       | BoardDetail        | 掲示板詳細画面。投稿完了後の遷移先。また、**編集モード（インライン編集）の呼び出し元（親）となる。** | （別途 B-02 詳細設計書を参照）                     |
| C-01       | AppHeader          | 共通ヘッダー。ログイン状態やテナント名を表示。     | `ch01_AppHeader_v1.x.md` 等             |
| C-02       | LanguageSwitch     | 言語切替コンポーネント。ラベル・メッセージの多言語化。 | `ch02_LanguageSwitch_v1.1.md`          |
| C-03       | StaticI18nProvider | 静的 i18n 辞書の提供。              | `ch03_StaticI18nProvider_v1.1.md`      |

BoardPostForm は、これらの共通コンポーネントと組み合わせて `/board/new` 画面を構成し、また B-02 内の一部品としても機能する。

### 7.3.2 バックエンド・サービス

| 区分    | 名称                            | 役割                                     | 参照詳細設計書                                                      |
| ----- | ----------------------------- | -------------------------------------- | ------------------------------------------------------------ |
| B-04  | BoardTranslationAndTtsService | 掲示板投稿・返信の翻訳／TTS を提供するサービス。**編集時は変更検知により再翻訳を制御する。** | `B-04_BoardTranslationAndTtsService-detail-design-ch02〜ch06` |
| Login | Login Backend                 | 認証情報を提供。投稿時の tenantId / userId の前提となる。 | `Login-Backend-basic-design_v1.0.md`                         |

BoardPostForm は、投稿/更新 API を通じて B-04 の翻訳サービスを暗黙的に利用する（翻訳処理は API 内部で実行され、BoardPostForm は結果を直接扱わない）。

---

## 7.4 実装・テスト指示書との紐づけ

### 7.4.1 Windsurf 実装指示書

| 区分          | ドキュメント名                              | 役割                                     |
| ----------- | ------------------------------------ | -------------------------------------- |
| Windsurf 指示 | `WS-B03_BoardPostForm_v1.x.md`（作成予定） | BoardPostForm コンポーネント実装タスクの具体的手順を定義する。 |

BoardPostForm の詳細設計（ch01〜ch06）は、Windsurf 指示書 WS-B03 の「唯一の正」として参照される。実装時には、WS-B03 側で本詳細設計書を前提としてタスクを分解する。

### 7.4.2 CodeAgent_Report

| 区分       | ドキュメント名                                               | 役割                                    |
| -------- | ----------------------------------------------------- | ------------------------------------- |
| 品質チェック報告 | `CodeAgent_Report_WS-B03_BoardPostForm_v1.x.md`（作成予定） | BoardPostForm 実装タスク完了時の実施内容・テスト結果の記録。 |

CodeAgent_Report では、ch06 で定義したテスト観点がどこまでカバーされているかを明示し、残課題があれば TODO として記載する。

---

## 7.5 トレーサビリティマトリクス（要約）

BoardPostForm に関する主な対応関係を要約する。

| ソース                    | 対応先                               |
| ---------------------- | --------------------------------- |
| 要件定義書（掲示板投稿・編集・回覧板）       | B-03 ch01〜ch04（概要・レイアウト・ロジック・データ） |
| B-02 詳細設計書（インライン編集） | B-03 ch06（結合・依存関係） |
| B-04 ch02〜ch04（翻訳/TTS） | B-03 ch03（データモデル）・ch04（投稿フロー）     |
| 非機能要件（添付サイズ・形式）        | B-03 ch05（添付メッセージ）・実装側バリデーション（**PDF/Office対応**）     |

本マトリクスは、BoardPostForm に関連する設計情報の位置付けを示すものであり、要件変更時に参照すべき文書を特定するために用いる。