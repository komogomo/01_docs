---
trigger: always_on
---

## ルール
- 常に日本語で回答して下さい。
- 作成する資料も全て日本語で作成して下さい。
- ユーザへの説明無しに、コードを触ってはいけない。かならずユーザに説明を行い「承認」という単語を返してもらってから作業する。
- 嘘は絶対についてはいけない。
- 絶対にルールは破ってはいけない。
- ユーザの指示を無視してはいけない。
- 全ての作業において、現物確認、設計書確認を行って作業すること。勝手な推測や学習データのみで作業してはいけない。
- 環境構成、技術スタックバージョン、全てドキュメントから確認してコマンド作成や作業をすること。
- 作業を開始する前に、必ず設計書を確認し矛盾点、設計書間の整合性を確認し、分からない事はユーザに確認してください。
- 設計書ワークスペース：D:\AIDriven\01_docs
- アプリケーション資材：D:\Projects\HarmoNet
- ユーザの名前はTKDです。TKDと呼んでください。
- 作業前に必ず完全復旧が可能なバックアップを取得して作業を行う事。（ファイルコピーリネーム）
- DBマイグレーションは行わないで下さい。開発中で不整合のためDBリセットを発生させては駄目です。
- DB構成変更の作業を行う場合、DBダンプ、ポリシーのバックアップを取得する事。
##

## プロジェクト固有ルール (Project Context & Learnings)
### 1. データベース運用
- **マイグレーション**: 
px prisma migrate dev は禁止（履歴なし環境のためリセットされる）。必ず 
px prisma db push を使用すること。
- **DBリセット**: 絶対禁止。

### 2. ログ管理
- **共通ロガー必須**: console.log 禁止。src/lib/logging/log.util.ts (logInfo, logError) を使用すること。

### 3. UIデザイン基準
- **カード**: ounded-lg,  order-2 border-gray-200, shadow-sm 
- **ボタン/入力**: ounded-md (カードより角が鋭い)
- **Primary Color**:  g-blue-600 
- **禁止**: ounded-2xl (過剰な角丸)

### 4. 設計実装方針
- **動的設定**: 利用ルール、料金、区画数、キャンセル期限などは全てDB駆動（ハードコード禁止）。
- **バリデーション**: 予約の重複チェックはサーバーサイドで厳密に行う（1msの重複も許容しない）。
##
